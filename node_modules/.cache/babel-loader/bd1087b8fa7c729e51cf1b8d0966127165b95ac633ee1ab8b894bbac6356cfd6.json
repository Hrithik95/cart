{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\React Projects\\\\cart\\\\src\\\\App.js\";\nimport React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport CartItem from './CartItem';\n// import { getFirestore, collection, query,  getDocs } from \"firebase/firestore\";\nimport { firestore } from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.handleIncreaseQuantity = product => {\n      console.log(product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n      //  products[index].qty+=1;\n      //  this.setState({\n      //   products:products\n      //  })\n      const docRef = firestore.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty + 1\n      }).then(() => {\n        console.log(\"Updated Successfully\");\n      }).catch(error => {\n        console.log(\"Error:\", error);\n      });\n    };\n    this.handleDecreaseQuantity = product => {\n      console.log(product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n      if (products[index].qty === 0) {\n        return;\n      }\n      products[index].qty -= 1;\n      this.setState({\n        products: products //if key and value has same variable name we can simply write single name also.Like here instead of writing \"products:products\" we can simply write \"products\" \n      });\n    };\n    this.handleDeleteProduct = id => {\n      const {\n        products\n      } = this.state;\n      const items = products.filter(item => item.id !== id);\n      this.setState({\n        products: items\n      });\n    };\n    this.getCartCount = () => {\n      const {\n        products\n      } = this.state;\n      let count = 0;\n      products.forEach(item => {\n        count += item.qty;\n      });\n      return count;\n    };\n    this.getCartTotal = () => {\n      const {\n        products\n      } = this.state;\n      let cartTotal = 0;\n      products.forEach(item => {\n        if (item.qty > 0) {\n          cartTotal = cartTotal + item.qty * item.price;\n        }\n      });\n      return cartTotal;\n    };\n    this.addProduct = () => {\n      firestore.collection(\"products\").add({\n        img: \"https://thurrott.s3.amazonaws.com/2021/05/thinkbook15-power-supply.jpg\",\n        price: 40000,\n        qty: 1,\n        title: \"Lenovo Thinkbook 15\"\n      }).then(docRef => {\n        console.log(\"Prodcut has been added\", docRef);\n      }).catch(error => {\n        console.log(\"Error:\", error);\n      });\n    };\n    this.state = {\n      products: [],\n      loading: true\n    };\n\n    //Method:2-without firestore\n    //\n    // this.state={\n    //     products:[\n    //         {\n    //         title:\"Phone\",\n    //         price:16500,\n    //         qty:1,\n    //         img:'https://images.unsplash.com/photo-1525598912003-663126343e1f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8cGhvbmV8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60',\n    //         id:1\n    //         },\n    //         {\n    //         title:\"Watch\",\n    //         price:1750,\n    //         qty:1,\n    //         img:'https://media.istockphoto.com/id/1333053202/photo/set-of-smart-watches-with-colorful-straps-on-black-background.jpg?b=1&s=170667a&w=0&k=20&c=LCLxaHBnFLMDlxxr-tlp-g7Zz-DvNVmISjPK-HIDdVg=',\n    //         id:2\n    //         },\n    //         {\n    //         title:\"Laptop\",\n    //         price:40000,\n    //         qty:1,\n    //         img:'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80',\n    //         id:3\n    //         }\n    //     ]\n    // }\n    // this.increaseQuantity=this.increaseQuantity.bind(this);\n    // this.testing();\n  }\n\n  componentDidMount() {\n    firestore.collection(\"products\").onSnapshot(snapshot => {\n      console.log(snapshot);\n      const products = snapshot.docs.map(doc => {\n        const data = doc.data();\n        data[\"id\"] = doc.id;\n        return data;\n      });\n      this.setState({\n        products: products,\n        loading: false\n      });\n    });\n  }\n  render() {\n    const {\n      products,\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        count: this.getCartCount()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          fontSize: 15,\n          padding: 2\n        },\n        onClick: this.addProduct,\n        children: \"Add a product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {\n        products: products,\n        onIncreaseQuantity: this.handleIncreaseQuantity,\n        onDecreaseQuantity: this.handleDecreaseQuantity,\n        onDeleteProduct: this.handleDeleteProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 10,\n          fontSize: 20\n        },\n        children: [\"TOTAL: \", this.getCartTotal()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Cart","Navbar","CartItem","firestore","App","Component","constructor","handleIncreaseQuantity","product","console","log","products","state","index","indexOf","docRef","collection","doc","id","update","qty","then","catch","error","handleDecreaseQuantity","setState","handleDeleteProduct","items","filter","item","getCartCount","count","forEach","getCartTotal","cartTotal","price","addProduct","add","img","title","loading","componentDidMount","onSnapshot","snapshot","docs","map","data","render","fontSize","padding"],"sources":["C:/Users/USER/Desktop/React Projects/cart/src/App.js"],"sourcesContent":["import React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport CartItem from './CartItem';\n// import { getFirestore, collection, query,  getDocs } from \"firebase/firestore\";\nimport { firestore } from \"./firebase\";\n\nclass App extends React.Component {\n  constructor(){\n    super();\n    this.state={\n      products:[],\n      loading:true\n    }\n\n\n     //Method:2-without firestore\n    //\n    // this.state={\n    //     products:[\n    //         {\n    //         title:\"Phone\",\n    //         price:16500,\n    //         qty:1,\n    //         img:'https://images.unsplash.com/photo-1525598912003-663126343e1f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8cGhvbmV8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60',\n    //         id:1\n    //         },\n    //         {\n    //         title:\"Watch\",\n    //         price:1750,\n    //         qty:1,\n    //         img:'https://media.istockphoto.com/id/1333053202/photo/set-of-smart-watches-with-colorful-straps-on-black-background.jpg?b=1&s=170667a&w=0&k=20&c=LCLxaHBnFLMDlxxr-tlp-g7Zz-DvNVmISjPK-HIDdVg=',\n    //         id:2\n    //         },\n    //         {\n    //         title:\"Laptop\",\n    //         price:40000,\n    //         qty:1,\n    //         img:'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80',\n    //         id:3\n    //         }\n    //     ]\n    // }\n    // this.increaseQuantity=this.increaseQuantity.bind(this);\n    // this.testing();\n}\ncomponentDidMount() {\n  \n    firestore\n    .collection(\"products\")\n    .onSnapshot(snapshot => {\n      console.log(snapshot);\n      const products = snapshot.docs.map(doc => {\n        const data = doc.data();\n        data[\"id\"] = doc.id;\n        return data;\n      });\n      this.setState({ \n        products: products, \n        loading: false \n      });\n    });\n}\n\n\nhandleIncreaseQuantity=(product)=>{\n   console.log(product);\n   const{products}=this.state;\n   const index=products.indexOf(product);\n  //  products[index].qty+=1;\n  //  this.setState({\n  //   products:products\n  //  })\n  const docRef=firestore.collection('products').doc(products[index].id);\n  docRef.update({\n    qty:products[index].qty+1\n  }).then(()=>{\n    console.log(\"Updated Successfully\");\n  }).catch((error)=>{\n    console.log(\"Error:\",error)\n  })\n}\n   \n   handleDecreaseQuantity=(product)=>{\n    \n    console.log(product);\n    const{products}=this.state;\n    \n    const index=products.indexOf(product);\n    if(products[index].qty===0){\n        return;\n    }\n    products[index].qty-=1;\n    this.setState({\n     products:products //if key and value has same variable name we can simply write single name also.Like here instead of writing \"products:products\" we can simply write \"products\" \n    })\n }\n handleDeleteProduct=(id)=>{\n    const{products}=this.state;\n    const items=products.filter((item)=>item.id!==id);\n    this.setState({\n        products:items\n    })\n }\n\n getCartCount=()=>{\n    const{products}=this.state;\n    let count=0;\n    products.forEach((item)=>{\n      count+=item.qty;\n    })\n    return count;\n }\n\n getCartTotal=()=>{\n  const{products}=this.state;\n  let cartTotal=0;\n  products.forEach((item)=>{\n    if(item.qty>0){\n    cartTotal=cartTotal+item.qty*item.price;\n }\n })\n\n  return cartTotal;\n }\n\n addProduct=()=>{\n  firestore\n  .collection(\"products\")\n  .add({\n    img:\"https://thurrott.s3.amazonaws.com/2021/05/thinkbook15-power-supply.jpg\",\n    price:40000,\n    qty:1,\n    title:\"Lenovo Thinkbook 15\"\n  }).then((docRef)=>{\n    console.log(\"Prodcut has been added\", docRef);\n  }).catch((error)=>{\n    console.log(\"Error:\",error);\n  })\n }\n      render(){\n        const{products,loading}=this.state;\n        return (\n          <div className=\"App\">\n            <Navbar count={this.getCartCount()}/>\n            <button style={{fontSize:15,padding:2}} onClick={this.addProduct}>Add a product</button>\n            <Cart\n            products={products}\n            onIncreaseQuantity={this.handleIncreaseQuantity}\n            onDecreaseQuantity={this.handleDecreaseQuantity}\n            onDeleteProduct={this.handleDeleteProduct}\n            />\n            {loading && <h1>Loading products...</h1>}\n            <div style={{padding:10,fontSize:20}}>TOTAL: {this.getCartTotal()}</div>\n          </div>\n        );\n      }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}